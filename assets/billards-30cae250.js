import{W as Z,S as $,P as ee,O as te,a as oe,C as r,M as w,b as d,c as ne,B as I,d as ie,V as i,e as le,L as se,f as ae,g as ce}from"./OrbitControls-4ff66f46.js";const de=.3,re=9.8,h=new Z;h.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(h.domElement);window.addEventListener("resize",function(){m.aspect=window.innerWidth/window.innerHeight,m.updateProjectionMatrix(),h.setSize(window.innerWidth,window.innerHeight)});const l=new $,p=new ce;p.stop();let P=0;const m=new ee(90,window.innerWidth/window.innerHeight,.1,1e3);m.position.set(0,200,300);const L=new te(m,h.domElement);L.minDistance=300;L.maxDistance=700;const me=new oe(280,140),j=new r;j.setRGB(.3,.6,.3);const we=new w({color:j}),B=new d(me,we);B.rotation.x=ne.degToRad(-90);B.position.y=0;l.add(B);const F=new I(280,20,10),W=new r;W.setRGB(.6,.3,.3);const v=new w({color:W}),b=new d(F,v);b.position.z=-70;b.position.y=10;l.add(b);const C=new d(F,v);C.position.z=70;C.position.y=10;l.add(C);const D=new I(10,20,140),z=new d(D,v);z.position.y=10;z.position.x=140;l.add(z);const S=new d(D,v);S.position.y=10;S.position.x=-140;l.add(S);window.setPlay=k;function k(){p.start()}document.getElementById("play_button").addEventListener("click",k);class x{constructor(e,o){this.name=o,this.ball=e,this.velocity=new i(0,0,0),this.mass=5,this.radius=4,this.hasCollided=!1}setVelocity(e){this.velocity=e}ballCollisionDetection(e){const o=this.ball,s=e.ball;let a=o.position.distanceTo(s.position),c=this.radius+e.radius;if(a<=c&&(this.hasCollided==!1||e.hasCollided==!1)){console.log("Collision detected",P,this.name,e.name);let t=new i().subVectors(s.position,o.position).normalize();this.hasCollided=!0,e.hasCollided=!0;let R=this.radius+e.radius-this.ball.position.distanceTo(e.ball.position),u=t.clone().multiplyScalar(R/2);this.ball.position.sub(u),e.ball.position.add(u);let g=this.velocity.clone(),K=e.velocity.clone(),Q=new i().subVectors(K,g).dot(t)*this.mass/2,V=t.clone().multiplyScalar(Q),X=this.velocity.clone().multiplyScalar(this.mass).add(V).divideScalar(this.mass),Y=e.velocity.clone().multiplyScalar(e.mass).sub(V).divideScalar(e.mass);this.velocity=X,e.velocity=Y}}update(e){if(this.velocity.length()>=1e-4){const t=de*this.mass*re,u=this.velocity.clone().normalize().multiplyScalar(-t).multiplyScalar(e),g=this.velocity.clone().multiplyScalar(this.mass).add(u);this.velocity.copy(g.divideScalar(this.mass))}const o=this.velocity.clone().multiplyScalar(e),s=this.ball.position.clone().add(o);this.ball.position.copy(s);const a=8;for(let t=0;t<n.length;t++){var c=n[t];c.name!=this.name&&this.ballCollisionDetection(c)}(this.ball.position.x-a<=-140||this.ball.position.x+a>=140)&&(this.velocity.x*=-1),(this.ball.position.z-a<=-70||this.ball.position.z+a>=70)&&(this.velocity.z*=-1)}}const E=new ie(4),H=new r;H.setRGB(.9,.9,.9);const he=new w({color:H}),_=new d(E,he);_.position.y=4;l.add(_);const f=new x(_,"Cue"),T=new r;T.setRGB(.9,.1,.1);const ye=new w({color:T}),M=new d(E,ye);M.position.copy(new i(25,4,15));l.add(M);const ue=new x(M,"Red"),A=new r;A.setRGB(.1,.9,.1);const pe=new w({color:A}),G=new d(E,pe);G.position.copy(new i(30,4,30));l.add(G);const ve=new x(G,"Green");let n=[];n.push(f);n.push(ue);n.push(ve);let _e=document.getElementById("v0_x").value,ge=0,fe=document.getElementById("v0_z").value,Be=new i(_e,ge,fe),O=new i;const be=new le().setFromPoints([O,Be]),N=new r;N.setRGB(0,1,0);const Ce=new se({color:N}),q=new ae(be,Ce);_.add(q);window.setVelocity=U;function U(){let y=document.getElementById("v0_x").value,e=0,o=document.getElementById("v0_z").value,s=new i(y,e,o);f.setVelocity(s),console.log(f.velocity)}document.getElementById("velocity_button").addEventListener("click",U);function J(){requestAnimationFrame(J);var y=p.getDelta();P=p.getElapsedTime();let e=document.getElementById("v0_x").value,o=0,s=document.getElementById("v0_z").value,a=new i(e,o,s);q.geometry.setFromPoints([O,a]);for(let t=0;t<n.length;t++){var c=n[t];c.update(y)}for(let t=0;t<n.length;t++){var c=n[t];c.hasCollided=!1}h.render(l,m)}J();
